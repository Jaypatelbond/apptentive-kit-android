task assembleModules(type: GradleBuild) {
    buildName = "assembleApptentiveModules"
    startParameter.projectProperties = project.gradle.startParameter.projectProperties
    tasks = ['apptentive-core:assembleRelease',
             'apptentive-core-ui:assembleRelease',
             'apptentive-feedback:assembleRelease',
             'apptentive-enjoyment-dialog:assembleRelease',
             'apptentive-in-app-review:assembleRelease',
             'apptentive-navigate-to-link:assembleRelease',
             'apptentive-notes:assembleRelease',
             'apptentive-ratings:assembleRelease',
             'apptentive-survey:assembleRelease',
             'apptentive-sdk-kit:assembleRelease']
}

task publishModules(type: GradleBuild)  {
    buildName = "publishApptentiveModules"
    startParameter.projectProperties = project.gradle.startParameter.projectProperties
    tasks = ['apptentive-core:artifactoryPublish',
             'apptentive-core-ui:artifactoryPublish',
             'apptentive-feedback:artifactoryPublish',
             'apptentive-enjoyment-dialog:artifactoryPublish',
             'apptentive-in-app-review:artifactoryPublish',
             'apptentive-navigate-to-link:artifactoryPublish',
             'apptentive-notes:artifactoryPublish',
             'apptentive-ratings:artifactoryPublish',
             'apptentive-survey:artifactoryPublish',
             'apptentive-sdk-kit:artifactoryPublish']
}

task publishApptentiveKit(type: GradleBuild) {
    //forward projectProperties
    startParameter.projectProperties = project.gradle.startParameter.projectProperties
    dependsOn assembleModules.finalizedBy(publishModules)
}